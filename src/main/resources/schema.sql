CREATE TABLE IF NOT EXISTS posts (
  id         INTEGER GENERATED BY DEFAULT AS IDENTITY,
  title      VARCHAR(255) NOT NULL,
  post       TEXT,
  picture    BYTEA,
  likes      INTEGER,
  created    TIMESTAMP WITHOUT TIME ZONE,
  CONSTRAINT pk_post PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS comments
(
    id         INTEGER GENERATED BY DEFAULT AS IDENTITY,
    comment    TEXT,
    post_id    INTEGER NOT NULL,
    created    TIMESTAMP WITHOUT TIME ZONE,
    CONSTRAINT pk_comment PRIMARY KEY (id),
    CONSTRAINT fk_post FOREIGN KEY (post_id) REFERENCES posts (id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS tags
(
    id         INTEGER GENERATED BY DEFAULT AS IDENTITY,
    tag        TEXT,
    CONSTRAINT pk_tag PRIMARY KEY (id)
)

CREATE TABLE IF NOT EXISTS posts_tags
(
    post_id    INTEGER NOT NULL,
    tag_id     INTEGER NOT NULL,
    CONSTRAINT fk_post FOREIGN KEY (post_id) REFERENCES posts (id) ON DELETE CASCADE,
    CONSTRAINT fk_tag FOREIGN KEY (tag_id) REFERENCES tags (id) ON DELETE CASCADE
)